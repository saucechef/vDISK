<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>vDISK: vDISK</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="vDiskIcon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">vDISK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">vDISK </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_C__vDISK-master_README"></a> vDISK is a student project that simulates a virtual FAT16 filesystem. <br  />
 Core features are: <br  />
</p><ul>
<li>Initialising and managing a virtual harddrive in RAM.</li>
<li>Formatting and using the virtual harddrive with a FAT16 filesystem.</li>
<li>Interfacing with the physical drive by file IO.</li>
<li>Saving and loading the virtual harddrive from image files on physical medium.</li>
</ul>
<h1><a class="anchor" id="autotoc_md37"></a>
Structure of the Program</h1>
<p>vDisk distributes the tasks between the files as follows:</p>
<h3><a class="anchor" id="autotoc_md38"></a>
vdisk_cli.c</h3>
<p>This is the main application that controls the console interaction.</p>
<h3><a class="anchor" id="autotoc_md39"></a>
vDISK_drive.h</h3>
<p>This file allows you to create and modify the virtual “hard disks” in memory. Which mean in essence, it reserves memory for the partition.</p>
<h3><a class="anchor" id="autotoc_md40"></a>
vDISK_fat16.h</h3>
<p>This file allows you need to create a FAT16 partition on the virtual hard disk and interact with the filesystem.</p>
<h3><a class="anchor" id="autotoc_md41"></a>
vDISK_utility.h</h3>
<p>This file contains helper metheds.</p>
<h1><a class="anchor" id="autotoc_md42"></a>
Cloning and building</h1>
<h2><a class="anchor" id="autotoc_md43"></a>
Linux</h2>
<h3><a class="anchor" id="autotoc_md44"></a>
vDISK-cli (command line interface):</h3>
<p>Perform these commands to clone and build vDISK-cli: <br  />
 Notice: You need to have packages <code>git-all</code>, <code>cmake</code> and <code>build-essential</code> installed. </p><div class="fragment"><div class="line">git clone https://github.com/saucechef/vDISK.git</div>
<div class="line">cd vDISK/</div>
<div class="line">chmod +x build_linux_cli.sh</div>
<div class="line">./build_linux_cli.sh</div>
<div class="line">cd build/</div>
</div><!-- fragment --><p>You can now use the binary <code>./vdisk_cli</code> to start vDISK-cli in the terminal.</p>
<h1><a class="anchor" id="autotoc_md45"></a>
Usage</h1>
<p>If you launch the program it will create a virtual drive named PLAYGROUND as example. To get your own project started, you should first create a new virtual drive. You can use the "newdrive" command to create a new virtual drive of any size. With the "format" command you can create a new FAT16 partition with any properties you want. If you don't specify any properties, the default values will be used. Inside this partition you can now create directories with the "mkdir" command and files with the "wrfile" command. <br  />
 The navigation within the directories works like in the Linux terminal. To change the directory the "cd" command is used and to list the contents of the directory the "ls" command is used. <br  />
 The created filesystem can be saved as .img file with the "savedisk" command. It is also possible to import an existing filesystem into vDISK using the "loaddisk" command. <br  />
 With the "fat16-getinfo" command it is possible to display all available information about the partition. To defragment the partition the "defrag" command is used. To check if a defragmentation is necessary you can use the "getfrag" command to display the fragmentation of the partition in percent. <br  />
 If you want to display contents in hexadecimal, for example to read the status of a sector, the "hexdump" command can be used. <br  />
 To list all commands you can simply use the "help" command.</p>
<h1><a class="anchor" id="autotoc_md46"></a>
Commands (for more detail, see manual.md):</h1>
<h3><a class="anchor" id="autotoc_md47"></a>
help</h3>
<p>Displays available commands and their usage. </p>
<h3><a class="anchor" id="autotoc_md48"></a>
hexdump [address] [number of rows]</h3>
<p>Example: hexdump 0x800 65536 <br  />
 This would dump the first copy of the FAT provided the formatting parameters are normal. </p>
<h3><a class="anchor" id="autotoc_md49"></a>
cd &gt;path&gt;</h3>
<p>Example: cd /dir1 <br  />
 Change from current working directory into subdirectory "dir1". </p>
<h3><a class="anchor" id="autotoc_md50"></a>
ls</h3>
<p>Lists the content of current working directory. </p>
<h3><a class="anchor" id="autotoc_md51"></a>
mmkdir &lt;virtualpath&gt;</h3>
<p>Example: mkdir /dir2 <br  />
 Creates new directory "dir2" in current working directory. </p>
<h3><a class="anchor" id="autotoc_md52"></a>
getinfo_fat16</h3>
<p>EPrints all available info about the drive and its FAT16 partition. </p>
<h3><a class="anchor" id="autotoc_md53"></a>
wrfile &lt;physicalpath&gt; &lt;virtualpath&gt;</h3>
<p>Example: wrfile testfile.txt /test/file1.txt <br  />
 Copies physical file "testfile.txt" into "file1.txt" ind directory "test". </p>
<h3><a class="anchor" id="autotoc_md54"></a>
exfile &lt;virtualpath&gt; &lt;physicalpath&gt;</h3>
<p>Example: exfile /test/file1.txt extract.txt <br  />
 Extracts file and writes it to "extract.txt". </p>
<h3><a class="anchor" id="autotoc_md55"></a>
rm &lt;virtualpath&gt;</h3>
<p>Example: rm /test <br  />
 Removes directory "test" and all its content recursively. </p>
<h3><a class="anchor" id="autotoc_md56"></a>
getfrag</h3>
<p>Gets fragmentation status of virtual FAT16 partition in percent. </p>
<h3><a class="anchor" id="autotoc_md57"></a>
defrag</h3>
<p>Defrags virtual FAT16 partition. </p>
<h3><a class="anchor" id="autotoc_md58"></a>
savedisk &lt;physicalpath&gt;</h3>
<p>Example: savedisk disk2 <br  />
 Saves disk-image of <a class="el" href="structv_drive.html" title="Drive.">vDrive</a> to "disk2.img" (extension is added automatically). </p>
<h3><a class="anchor" id="autotoc_md59"></a>
loaddisk &lt;physicalpath&gt;</h3>
<p>Example: loaddisk disk1.img <br  />
 Loads disk-image into <a class="el" href="structv_drive.html" title="Drive.">vDrive</a> (extension is NOT added automatically). </p>
<h3><a class="anchor" id="autotoc_md60"></a>
format &lt;format&gt; &lt;label&gt; [sectorspercluster] [sectorsperfat]</h3>
<p>Example: format <a class="el" href="structfat16.html" title="This struct models a FAT.">fat16</a> "TESTDRIVE" <br  />
 Will format <a class="el" href="structv_drive.html" title="Drive.">vDrive</a> with a FAT16 partition with 4 sectors per cluster and 128 sectors per fat. </p>
<h3><a class="anchor" id="autotoc_md61"></a>
newdrive &lt;size&gt;</h3>
<p>Creats a new virtual drive. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
